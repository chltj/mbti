<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- namespace는 반드시 UserDao의 패키지+이름과 100% 같아야 함 -->
<mapper namespace="com.example.k_mbti.dao.UserDao">

    <!-- AuthServiceImpl.signup() 에서 호출하는 메소드 -->
    <select id="findByEmail"
            parameterType="string"
            resultType="com.example.k_mbti.dto.UserDto">
        SELECT id, email, nickname, password, created_at
        FROM users
        WHERE email = #{email}
    </select>
        <select id="findById"
            parameterType="long"
            resultType="com.example.k_mbti.dto.UserDto">
        SELECT
            id,
            nickname,
            email,
            password
        FROM users
        WHERE id = #{id}
    </select>

    <!-- 회원가입 시 실제 저장하는 메소드 -->
    <insert id="insertUser"
            parameterType="com.example.k_mbti.dto.UserDto">
        INSERT INTO users (email, nickname, password, created_at)
        VALUES (#{email}, #{nickname}, #{password}, NOW())
    </insert>
    <update id="updateProfile" parameterType="com.example.k_mbti.dto.UserDto">
    UPDATE users
    SET nickname = #{nickname},
        email = #{email}
    WHERE id = #{id}
</update>



</mapper>
