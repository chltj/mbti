<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head>
    <meta charset="UTF-8">
    <title>MBTI 분석 결과</title>

    <!-- 공통 CSS -->
    <link rel="stylesheet" th:href="@{/css/common.css}">
    <!-- 결과 전용 CSS -->
    <link rel="stylesheet" th:href="@{/css/result.css}">
</head>
<body>

<!-- ✅ header fragment (신 문법 적용) -->
<div th:replace="~{fragments/header :: siteHeader}"></div>

<div class="page-wrap">

    <h2 class="page-title">
        <span>🔍</span>
        <span>MBTI 분석 결과</span>
    </h2>

    <p class="page-sub">
        업로드하신 카카오톡 대화를 기반으로<br>
        <b>규칙 기반 + 머신러닝 하이브리드 분석</b> 결과입니다.
    </p>

    <!-- ============================= -->
    <!-- ✅ 하이브리드 MBTI 카드 그룹 -->
    <!-- ============================= -->
    <div class="mbti-card-group">

        <!-- ✅ 최종 하이브리드 MBTI -->
        <div class="mbti-card main">
            <h3>✅ 최종 하이브리드 MBTI</h3>

            <div class="mbti-type" th:text="${mbti}">INFP</div>

            <div class="confidence-bar">
                <div class="confidence-fill"
                     th:style="'width:' + ${confidence} + '%'">
                </div>
            </div>

            <p>
                신뢰도:
                <b><span th:text="${confidence}">85</span>%</b>
            </p>

            <p class="name-text">
                분석 대상: <b th:text="${name}">이름</b>
            </p>
        </div>

        <!-- ✅ 규칙 기반 MBTI -->
        <div class="mbti-card sub">
            <h4>📏 규칙 기반 MBTI</h4>
            <p class="sub-mbti" th:text="${ruleMbti}">INFP</p>
            <p class="desc">말투, 감정 표현, 문장 패턴 기반 분석</p>
        </div>

        <!-- ✅ 머신러닝 기반 MBTI -->
        <div class="mbti-card sub">
            <h4>🤖 머신러닝 MBTI</h4>
            <p class="sub-mbti" th:text="${mlMbti}">ESTP</p>
            <p class="desc">10,000개 학습 데이터 기반 예측</p>
        </div>

    </div>

    <!-- ============================= -->
    <!-- ✅ 안내 문구 -->
    <!-- ============================= -->
    <div class="result-notice">
        <p>
            본 결과는 <b>AI 기반 추정 결과</b>이며,
            실제 성격과는 차이가 있을 수 있습니다.
        </p>
    </div>

    <!-- ============================= -->
    <!-- ✅ 다시 분석 버튼 -->
    <!-- ============================= -->
    <div class="btn-wrap">
        <a href="/mbti" class="btn-main">다시 분석하기</a>
        <a href="/" class="btn-sub">메인으로</a>
    </div>

</div>

<!-- ✅ footer fragment (신 문법 적용) -->
<div th:replace="~{fragments/footer :: siteFooter}"></div>

</body>
</html>
