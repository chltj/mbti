<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>카카오 로그인 예제</title>
</head>
<body>

 <a id="kakao-login-btn" href="#">
    <img src="https://k.kakaocdn.net/14/dn/btroDszwNrM/I6efHub1SN5KCJqLm1Ovx1/o.jpg"
         width="222" alt="카카오 로그인 버튼"/>
</a>

<p id="result"></p>

<script src="https://developers.kakao.com/sdk/js/kakao.js"></script>

<script>
    // 실제 자바스크립트 키로 바꾸기!
    Kakao.init('2cad92817abfe73ed312b2096271aec4');
    console.log(Kakao.isInitialized());

    function loginWithKakao() {
        Kakao.Auth.login({
            scope: 'profile_nickname, profile_image, account_email',
            success: function(authObj) {
                console.log(authObj);
                alert("로그인 성공! 토큰: " + authObj.access_token);

                Kakao.API.request({
                    url: '/v2/user/me',
                    success: function(response) {
                        console.log(response);
                        document.getElementById('result').innerText =
                            `환영합니다, ${response.kakao_account.profile.nickname}님!`;
                    },
                    fail: function(error) {
                        console.error(error);
                    }
                });
            },
            fail: function(err) {
                console.error(err);
            },
        });
    }

    // >>> 여기 핵심: 버튼 클릭하면 loginWithKakao() 실행
    document.getElementById('kakao-login-btn').addEventListener('click', function(e) {
        e.preventDefault(); // a 태그의 기본 이동 막기
        loginWithKakao();
    });
</script>


</body>
</html>