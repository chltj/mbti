<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ë‚´ ì •ë³´ ìˆ˜ì •</title>
    <link href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;500;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" th:href="@{/css/common.css}">
    <link rel="stylesheet" th:href="@{/css/mypage.css}">
</head>
<body>

<div th:replace="fragments/header :: siteHeader"></div>

<div class="page-wrap">

    <h2 class="page-title">
        <span>ğŸ› </span>
        <span>ë‚´ ì •ë³´ ìˆ˜ì •</span>
    </h2>

    <p class="page-sub">
        íšŒì› ì •ë³´(ë‹‰ë„¤ì„, ì´ë©”ì¼, ì „í™”ë²ˆí˜¸)ë¥¼ ìˆ˜ì •í•˜ê³ <br>
        ì›í•˜ì‹œë©´ ë¹„ë°€ë²ˆí˜¸ë„ í•¨ê»˜ ë³€ê²½í•  ìˆ˜ ìˆì–´ìš”.
    </p>

    <div class="card">

        <!-- ì—ëŸ¬/ì™„ë£Œ ë©”ì‹œì§€ -->
        <div th:if="${errorMsg}"
             style="margin-bottom:12px; padding:10px; border-radius:10px;
                    background:#ffeaea; border:1px solid #f5b1b1; color:#b00020; font-size:13px;"
             th:text="${errorMsg}">
        </div>

        <div th:if="${successMsg}"
             style="margin-bottom:12px; padding:10px; border-radius:10px;
                    background:#e8ffea; border:1px solid #a9e6b0; color:#206a2f; font-size:13px;"
             th:text="${successMsg}">
        </div>

        <!-- auth: UserDto ë°”ì¸ë”© -->
<form id="profileForm"
      th:action="@{/mypage/edit}"
      th:object="${auth}"
      method="post">

    <!-- PK ìˆ¨ê¹€ -->
    <input type="hidden" th:field="*{id}"/>

    <!-- ë‹‰ë„¤ì„ -->
    <div class="form-row">
        <label class="form-label" for="nickname">ë‹‰ë„¤ì„</label>
        <input id="nickname" class="form-input" type="text"
               th:field="*{nickname}"
               placeholder="í‘œì‹œë  ë‹‰ë„¤ì„" required>
    </div>

    <!-- ì´ë©”ì¼ -->
    <div class="form-row">
        <label class="form-label" for="email">ì´ë©”ì¼</label>
        <input id="email" class="form-input" type="email"
               th:field="*{email}"
               placeholder="example@email.com">
    </div>

    <!-- ì „í™”ë²ˆí˜¸ -->
    <div class="form-row">
        <label class="form-label" for="phone">ì „í™”ë²ˆí˜¸</label>
        <input id="phone" class="form-input" type="text"
               th:field="*{phone}"
               placeholder="010-1234-5678">
    </div>

    <hr style="margin:18px 0; border-color:#f3e7b5;">

    <p style="font-size:12px; color:#777; margin-bottom:10px;">
        ë¹„ë°€ë²ˆí˜¸ë¥¼ ë³€ê²½í•˜ì§€ ì•Šìœ¼ë ¤ë©´ ì•„ë˜ ì¹¸ì„ ë¹„ì›Œë‘ì„¸ìš”.
    </p>

    <!-- ìƒˆ ë¹„ë°€ë²ˆí˜¸ -->
    <div class="form-row">
        <label class="form-label" for="password">ìƒˆ ë¹„ë°€ë²ˆí˜¸</label>
        <input id="password" class="form-input" type="password"
               name="newPassword"
               placeholder="ë³€ê²½í•  ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”">
    </div>

    <!-- ìƒˆ ë¹„ë°€ë²ˆí˜¸ í™•ì¸ -->
    <div class="form-row">
        <label class="form-label" for="passwordConfirm">ìƒˆ ë¹„ë°€ë²ˆí˜¸ í™•ì¸</label>
        <input id="passwordConfirm" class="form-input" type="password"
               name="newPasswordConfirm"
               placeholder="ë³€ê²½í•  ë¹„ë°€ë²ˆí˜¸ë¥¼ í•œ ë²ˆ ë” ì…ë ¥í•˜ì„¸ìš”">
    </div>

    <div style="margin-top:18px; display:flex; justify-content:flex-end; gap:8px;">
        <a th:href="@{/mypage}" class="btn-secondary">ì·¨ì†Œ</a>
        <button type="submit" class="btn-submit">ì €ì¥í•˜ê¸°</button>
    </div>
</form>

<script>
    (function () {
        const form = document.getElementById('profileForm');
        const pw = document.getElementById('password');
        const pw2 = document.getElementById('passwordConfirm');

        form.addEventListener('submit', function (e) {
            const pwVal = pw.value.trim();
            const pw2Val = pw2.value.trim();

            if (pwVal === "" && pw2Val === "") {
                return; // ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ì•ˆ í•¨
            }

            if (pwVal === "" || pw2Val === "" || pwVal !== pw2Val) {
                e.preventDefault();
                alert("ìƒˆ ë¹„ë°€ë²ˆí˜¸ì™€ ë¹„ë°€ë²ˆí˜¸ í™•ì¸ì´ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");
                pw2.focus();
                return;
            }

            const ok = confirm("ì •ë§ ë¹„ë°€ë²ˆí˜¸ë¥¼ ë³€ê²½í•˜ì‹œê² ìŠµë‹ˆê¹Œ?");
            if (!ok) {
                e.preventDefault();
            }
        });
    })();
</script>


</body>
</html>
